(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72db98d8","chunk-2d0e5972"],{1903:function(t,e,n){"use strict";n.r(e);n("7f7f");var s=n("94ab");e["default"]={data:function(){return{formVisible:!1,formTitle:"添加任务",deptList:[],isAdd:!0,form:{id:"",name:"",jobClass:"",cron:"",note:"",disabled:!0,data:""},rules:{name:[{required:!0,message:"请输入任务名",trigger:"blur"},{min:2,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],jobClass:[{required:!0,message:"请输入执行类",trigger:"blur"}],cron:[{required:!0,message:"请输入定时规则",trigger:"blur"}]},listQuery:{name:void 0},total:0,list:null,listLoading:!0,selRow:{}}},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},created:function(){this.init()},methods:{init:function(){this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,Object(s["getList"])(this.listQuery).then((function(e){t.list=e.data,t.listLoading=!1}))},search:function(){this.fetchData()},reset:function(){this.listQuery.name="",this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.getList()},handleClose:function(){},handleCurrentChange:function(t,e){this.selRow=t},resetForm:function(){this.form={}},add:function(){this.resetForm(),this.formTitle="添加任务",this.formVisible=!0,this.isAdd=!0},save:function(){var t=this,e=this;this.$refs["form"].validate((function(n){if(!n)return!1;Object(s["save"])({id:e.form.id,name:e.form.name,jobClass:e.form.jobClass,cron:e.form.cron,data:e.form.data,note:e.form.note}).then((function(e){console.log(e),t.$message({message:"提交成功",type:"success"}),t.fetchData(),t.formVisible=!1}))}))},checkSel:function(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:"请选中操作项",type:"warning"}),!1)},enable:function(t){var e=this;this.$confirm("确定启用该定时任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["enable"])(t).then((function(t){e.$message({message:"操作成功",type:"success"}),e.fetchData()}))})).catch((function(){}))},disable:function(t){var e=this;this.$confirm("确定禁用该定时任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["disable"])(t).then((function(t){e.$message({message:"操作成功",type:"success"}),e.fetchData()}))})).catch((function(){}))},viewLog:function(t){this.$router.push({path:"/taskLog",query:{taskId:t}})},edit:function(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="修改任务",this.formVisible=!0)},remove:function(){var t=this;if(this.checkSel()){var e=this.selRow.id;this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["remove"])(e).then((function(e){t.$message({message:"操作成功",type:"success"}),t.fetchData()}))})).catch((function(){}))}}}}},"94ab":function(t,e,n){"use strict";n.r(e),n.d(e,"getList",(function(){return i})),n.d(e,"save",(function(){return a})),n.d(e,"remove",(function(){return r})),n.d(e,"logList",(function(){return o})),n.d(e,"enable",(function(){return c})),n.d(e,"disable",(function(){return u}));var s=n("b775");function i(t){return Object(s["default"])({url:"/task/list",method:"get",params:t})}function a(t){return Object(s["default"])({url:"/task",method:"post",params:t})}function r(t){return Object(s["default"])({url:"/task",method:"delete",params:{id:t}})}function o(t){return Object(s["default"])({url:"/task/logList",method:"get",params:t})}function c(t){return Object(s["default"])({url:"/task/enable/",method:"POST",params:{taskId:t}})}function u(t){return Object(s["default"])({url:"/task/disable/",method:"POST",params:{taskId:t}})}}}]);